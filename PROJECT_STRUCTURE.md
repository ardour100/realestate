# é¡¹ç›®æ–‡ä»¶ç»“æ„è¯´æ˜

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜é¡¹ç›®ä¸­æ¯ä¸ªæ–‡ä»¶çš„ä½œç”¨ï¼ŒåŒºåˆ†å‰ç«¯ã€åç«¯å’Œæ•°æ®åº“æ–‡ä»¶ã€‚

## ğŸ“ å®Œæ•´ç›®å½•ç»“æ„

```
realestate/
â”œâ”€â”€ ğŸ“‚ app/                          # Next.js App Router ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“‚ api/                      # ğŸ”´ åç«¯ API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ auth/
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ [...nextauth]/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ route.ts        # ğŸ”´ åç«¯ï¼šNextAuth è®¤è¯å¤„ç†å™¨
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“‚ register/
â”‚   â”‚   â”‚       â””â”€â”€ route.ts        # ğŸ”´ åç«¯ï¼šç”¨æˆ·æ³¨å†Œ API
â”‚   â”‚   â””â”€â”€ ğŸ“‚ properties/
â”‚   â”‚       â””â”€â”€ route.ts            # ğŸ”´ åç«¯ï¼šæˆ¿äº§ CRUD API
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ properties/               # ğŸ”µ å‰ç«¯é¡µé¢
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ [id]/
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx            # ğŸ”µ å‰ç«¯ï¼šæˆ¿äº§è¯¦æƒ…é¡µ
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ new/
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx            # ğŸ”µ å‰ç«¯ï¼šåˆ›å»ºæˆ¿äº§é¡µé¢
â”‚   â”‚   â””â”€â”€ page.tsx                # ğŸ”µ å‰ç«¯ï¼šæˆ¿äº§åˆ—è¡¨é¡µ
â”‚   â”‚
â”‚   â”œâ”€â”€ favicon.ico                  # ğŸ”µ å‰ç«¯ï¼šç½‘ç«™å›¾æ ‡
â”‚   â”œâ”€â”€ globals.css                  # ğŸ”µ å‰ç«¯ï¼šå…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ layout.tsx                   # ğŸ”µ å‰ç«¯ï¼šæ ¹å¸ƒå±€ç»„ä»¶
â”‚   â””â”€â”€ page.tsx                     # ğŸ”µ å‰ç«¯ï¼šé¦–é¡µ
â”‚
â”œâ”€â”€ ğŸ“‚ components/                   # ğŸ”µ å‰ç«¯ç»„ä»¶
â”‚   â””â”€â”€ Navbar.tsx                   # ğŸ”µ å‰ç«¯ï¼šå¯¼èˆªæ ç»„ä»¶
â”‚
â”œâ”€â”€ ğŸ“‚ lib/                          # ğŸ”´ åç«¯å·¥å…·åº“
â”‚   â”œâ”€â”€ auth.ts                      # ğŸ”´ åç«¯ï¼šè®¤è¯é…ç½®
â”‚   â””â”€â”€ prisma.ts                    # ğŸ”´ åç«¯ï¼šæ•°æ®åº“å®¢æˆ·ç«¯å®ä¾‹
â”‚
â”œâ”€â”€ ğŸ“‚ prisma/                       # ğŸŸ¢ æ•°æ®åº“ç›¸å…³
â”‚   â”œâ”€â”€ ğŸ“‚ migrations/               # ğŸŸ¢ æ•°æ®åº“è¿ç§»æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ 20251209000738_init/
â”‚   â”‚   â”‚   â””â”€â”€ migration.sql       # ğŸŸ¢ æ•°æ®åº“ï¼šSQL è¿ç§»è„šæœ¬
â”‚   â”‚   â””â”€â”€ migration_lock.toml     # ğŸŸ¢ æ•°æ®åº“ï¼šè¿ç§»é”æ–‡ä»¶
â”‚   â”œâ”€â”€ schema.prisma                # ğŸŸ¢ æ•°æ®åº“ï¼šæ•°æ®æ¨¡å‹å®šä¹‰
â”‚   â””â”€â”€ dev.db                       # ğŸŸ¢ æ•°æ®åº“ï¼šSQLite æ•°æ®åº“æ–‡ä»¶ï¼ˆ.gitignoreï¼‰
â”‚
â”œâ”€â”€ ğŸ“‚ public/                       # ğŸ”µ å‰ç«¯é™æ€èµ„æº
â”‚   â”œâ”€â”€ file.svg                     # ğŸ”µ å‰ç«¯ï¼šSVG å›¾æ ‡
â”‚   â”œâ”€â”€ globe.svg                    # ğŸ”µ å‰ç«¯ï¼šSVG å›¾æ ‡
â”‚   â”œâ”€â”€ next.svg                     # ğŸ”µ å‰ç«¯ï¼šNext.js Logo
â”‚   â”œâ”€â”€ vercel.svg                   # ğŸ”µ å‰ç«¯ï¼šVercel Logo
â”‚   â””â”€â”€ window.svg                   # ğŸ”µ å‰ç«¯ï¼šSVG å›¾æ ‡
â”‚
â”œâ”€â”€ ğŸ“‚ node_modules/                 # âš™ï¸ ä¾èµ–åŒ…ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”‚
â”œâ”€â”€ .env                             # ğŸ”´ åç«¯ï¼šç¯å¢ƒå˜é‡ï¼ˆ.gitignoreï¼‰
â”œâ”€â”€ .env.example                     # ğŸ“„ æ–‡æ¡£ï¼šç¯å¢ƒå˜é‡ç¤ºä¾‹
â”œâ”€â”€ .gitignore                       # âš™ï¸ Git é…ç½®
â”œâ”€â”€ DEPLOYMENT.md                    # ğŸ“„ æ–‡æ¡£ï¼šéƒ¨ç½²æŒ‡å—
â”œâ”€â”€ eslint.config.mjs                # âš™ï¸ ESLint é…ç½®
â”œâ”€â”€ next.config.ts                   # âš™ï¸ Next.js é…ç½®
â”œâ”€â”€ next-env.d.ts                    # âš™ï¸ TypeScript å£°æ˜ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”œâ”€â”€ package.json                     # âš™ï¸ é¡¹ç›®ä¾èµ–å’Œè„šæœ¬
â”œâ”€â”€ package-lock.json                # âš™ï¸ ä¾èµ–é”å®šæ–‡ä»¶
â”œâ”€â”€ postcss.config.mjs               # âš™ï¸ PostCSS é…ç½®
â”œâ”€â”€ prisma.config.ts                 # ğŸŸ¢ æ•°æ®åº“ï¼šPrisma é…ç½®
â”œâ”€â”€ README.md                        # ğŸ“„ æ–‡æ¡£ï¼šé¡¹ç›®è¯´æ˜
â”œâ”€â”€ tsconfig.json                    # âš™ï¸ TypeScript é…ç½®
â””â”€â”€ vercel.json                      # âš™ï¸ Vercel éƒ¨ç½²é…ç½®
```

---

## ğŸ”µ å‰ç«¯æ–‡ä»¶è¯¦è§£

### é¡µé¢ç»„ä»¶ (Pages)
ä½äº `app/` ç›®å½•ä¸‹ï¼Œè´Ÿè´£æ¸²æŸ“ç”¨æˆ·ç•Œé¢ã€‚

| æ–‡ä»¶è·¯å¾„ | ä½œç”¨ | è¯´æ˜ |
|---------|------|------|
| `app/page.tsx` | é¦–é¡µ | å±•ç¤º Hero sectionã€åŠŸèƒ½ä»‹ç»ã€CTA |
| `app/layout.tsx` | æ ¹å¸ƒå±€ | åŒ…å«å¯¼èˆªæ ã€å…¨å±€æ ·å¼ã€å­—ä½“é…ç½® |
| `app/properties/page.tsx` | æˆ¿äº§åˆ—è¡¨é¡µ | å±•ç¤ºæ‰€æœ‰æˆ¿äº§çš„ç½‘æ ¼å¸ƒå±€ |
| `app/properties/[id]/page.tsx` | æˆ¿äº§è¯¦æƒ…é¡µ | å±•ç¤ºå•ä¸ªæˆ¿äº§çš„è¯¦ç»†ä¿¡æ¯ |
| `app/properties/new/page.tsx` | åˆ›å»ºæˆ¿äº§é¡µ | è¡¨å•é¡µé¢ï¼Œç”¨äºå‘å¸ƒæ–°æˆ¿äº§ |

### UI ç»„ä»¶ (Components)
å¯å¤ç”¨çš„å‰ç«¯ç»„ä»¶ã€‚

| æ–‡ä»¶è·¯å¾„ | ä½œç”¨ | è¯´æ˜ |
|---------|------|------|
| `components/Navbar.tsx` | å¯¼èˆªæ ç»„ä»¶ | é¡¶éƒ¨å¯¼èˆªï¼ŒåŒ…å«é“¾æ¥å’ŒæŒ‰é’® |

### æ ·å¼æ–‡ä»¶ (Styles)

| æ–‡ä»¶è·¯å¾„ | ä½œç”¨ | è¯´æ˜ |
|---------|------|------|
| `app/globals.css` | å…¨å±€æ ·å¼ | Tailwind CSS å¯¼å…¥å’Œå…¨å±€æ ·å¼ |

### é™æ€èµ„æº (Public Assets)

| æ–‡ä»¶è·¯å¾„ | ä½œç”¨ | è¯´æ˜ |
|---------|------|------|
| `public/*.svg` | SVG å›¾æ ‡ | å„ç§å›¾æ ‡å’Œ Logo |
| `app/favicon.ico` | ç½‘ç«™å›¾æ ‡ | æµè§ˆå™¨æ ‡ç­¾é¡µå›¾æ ‡ |

---

## ğŸ”´ åç«¯æ–‡ä»¶è¯¦è§£

### API è·¯ç”± (API Routes)
ä½äº `app/api/` ç›®å½•ï¼Œå¤„ç†æœåŠ¡å™¨ç«¯é€»è¾‘ã€‚

| æ–‡ä»¶è·¯å¾„ | ä½œç”¨ | HTTP æ–¹æ³• | è¯´æ˜ |
|---------|------|-----------|------|
| `app/api/auth/[...nextauth]/route.ts` | è®¤è¯å¤„ç† | GET, POST | NextAuth.js è®¤è¯ç«¯ç‚¹ |
| `app/api/auth/register/route.ts` | ç”¨æˆ·æ³¨å†Œ | POST | åˆ›å»ºæ–°ç”¨æˆ·è´¦æˆ· |
| `app/api/properties/route.ts` | æˆ¿äº§ API | GET, POST | è·å–æˆ¿äº§åˆ—è¡¨ã€åˆ›å»ºæ–°æˆ¿äº§ |

**API è·¯ç”±è¯´æ˜ï¼š**
- `GET /api/properties` - è·å–æ‰€æœ‰æˆ¿äº§
- `POST /api/properties` - åˆ›å»ºæ–°æˆ¿äº§
- `POST /api/auth/register` - ç”¨æˆ·æ³¨å†Œ
- `/api/auth/[...nextauth]/*` - å¤„ç†ç™»å½•ã€ç™»å‡ºã€ä¼šè¯

### å·¥å…·åº“ (Libraries)
åç«¯é€»è¾‘å’Œé…ç½®ã€‚

| æ–‡ä»¶è·¯å¾„ | ä½œç”¨ | è¯´æ˜ |
|---------|------|------|
| `lib/auth.ts` | è®¤è¯é…ç½® | NextAuth.js é…ç½®ã€JWTã€session å¤„ç† |
| `lib/prisma.ts` | æ•°æ®åº“å®¢æˆ·ç«¯ | Prisma Client å•ä¾‹å®ä¾‹ |

### ç¯å¢ƒå˜é‡ (Environment)

| æ–‡ä»¶è·¯å¾„ | ä½œç”¨ | è¯´æ˜ |
|---------|------|------|
| `.env` | ç¯å¢ƒå˜é‡ | æ•°æ®åº“è¿æ¥ã€å¯†é’¥ç­‰æ•æ„Ÿä¿¡æ¯ï¼ˆä¸æäº¤åˆ° Gitï¼‰ |
| `.env.example` | ç¤ºä¾‹æ–‡ä»¶ | ç¯å¢ƒå˜é‡æ¨¡æ¿ï¼Œä¾›å‚è€ƒ |

---

## ğŸŸ¢ æ•°æ®åº“æ–‡ä»¶è¯¦è§£

### Prisma ORM é…ç½®

| æ–‡ä»¶è·¯å¾„ | ä½œç”¨ | è¯´æ˜ |
|---------|------|------|
| `prisma/schema.prisma` | æ•°æ®æ¨¡å‹å®šä¹‰ | å®šä¹‰ Userã€Propertyã€Favorite è¡¨ç»“æ„ |
| `prisma.config.ts` | Prisma é…ç½® | Prisma é¡¹ç›®é…ç½® |

### æ•°æ®åº“è¿ç§» (Migrations)

| æ–‡ä»¶è·¯å¾„ | ä½œç”¨ | è¯´æ˜ |
|---------|------|------|
| `prisma/migrations/*/migration.sql` | SQL è¿ç§»è„šæœ¬ | åˆ›å»ºæ•°æ®åº“è¡¨çš„ SQL è¯­å¥ |
| `prisma/migrations/migration_lock.toml` | è¿ç§»é” | é”å®šæ•°æ®åº“ç±»å‹ |

### æ•°æ®åº“æ–‡ä»¶

| æ–‡ä»¶è·¯å¾„ | ä½œç”¨ | è¯´æ˜ |
|---------|------|------|
| `prisma/dev.db` | SQLite æ•°æ®åº“ | æœ¬åœ°å¼€å‘æ•°æ®åº“æ–‡ä»¶ï¼ˆä¸æäº¤åˆ° Gitï¼‰ |
| `prisma/dev.db-journal` | SQLite æ—¥å¿— | äº‹åŠ¡æ—¥å¿—æ–‡ä»¶ï¼ˆä¸æäº¤åˆ° Gitï¼‰ |

**æ•°æ®æ¨¡å‹è¯´æ˜ï¼š**

```prisma
# User è¡¨
- id: ç”¨æˆ· ID
- email: é‚®ç®±ï¼ˆå”¯ä¸€ï¼‰
- password: åŠ å¯†å¯†ç 
- name: ç”¨æˆ·å
- role: è§’è‰²ï¼ˆUSER, AGENT, ADMINï¼‰

# Property è¡¨
- id: æˆ¿äº§ ID
- title: æ ‡é¢˜
- description: æè¿°
- price: ä»·æ ¼
- address: åœ°å€
- city: åŸå¸‚
- state: å·/çœ
- zipCode: é‚®ç¼–
- bedrooms: å§å®¤æ•°é‡
- bathrooms: æµ´å®¤æ•°é‡
- sqft: é¢ç§¯ï¼ˆå¹³æ–¹è‹±å°ºï¼‰
- type: ç±»å‹ï¼ˆSALE, RENTï¼‰
- status: çŠ¶æ€ï¼ˆACTIVE, SOLD, PENDINGï¼‰
- images: å›¾ç‰‡ JSON å­—ç¬¦ä¸²
- userId: æ‰€å±ç”¨æˆ· ID

# Favorite è¡¨
- id: æ”¶è— ID
- userId: ç”¨æˆ· ID
- propertyId: æˆ¿äº§ ID
```

---

## âš™ï¸ é…ç½®æ–‡ä»¶è¯´æ˜

| æ–‡ä»¶è·¯å¾„ | ç±»å‹ | ä½œç”¨ |
|---------|------|------|
| `package.json` | é…ç½® | é¡¹ç›®ä¾èµ–ã€è„šæœ¬ã€å…ƒæ•°æ® |
| `tsconfig.json` | é…ç½® | TypeScript ç¼–è¯‘é…ç½® |
| `next.config.ts` | é…ç½® | Next.js æ¡†æ¶é…ç½® |
| `eslint.config.mjs` | é…ç½® | ä»£ç æ£€æŸ¥è§„åˆ™ |
| `postcss.config.mjs` | é…ç½® | CSS å¤„ç†é…ç½® |
| `vercel.json` | é…ç½® | Vercel éƒ¨ç½²é…ç½® |
| `.gitignore` | é…ç½® | Git å¿½ç•¥æ–‡ä»¶è§„åˆ™ |

---

## ğŸ”„ æ•°æ®æµç¨‹å›¾

```
ç”¨æˆ·æµè§ˆå™¨
    â†“
ğŸ”µ å‰ç«¯é¡µé¢ (app/properties/page.tsx)
    â†“
    fetch('/api/properties')
    â†“
ğŸ”´ åç«¯ API (app/api/properties/route.ts)
    â†“
    prisma.property.findMany()
    â†“
ğŸŸ¢ æ•°æ®åº“ (prisma/dev.db)
    â†“
    è¿”å›æ•°æ®
    â†“
ğŸ”´ åç«¯å¤„ç†å¹¶è¿”å› JSON
    â†“
ğŸ”µ å‰ç«¯æ¸²æŸ“æ•°æ®
    â†“
ç”¨æˆ·çœ‹åˆ°æˆ¿äº§åˆ—è¡¨
```

---

## ğŸ“Š æŠ€æœ¯æ ˆå¯¹åº”

| æŠ€æœ¯ | æ–‡ä»¶ç±»å‹ | ä¸»è¦æ–‡ä»¶ |
|------|----------|----------|
| **Next.js** | ğŸ”µğŸ”´ å‰ç«¯+åç«¯ | `app/` ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶ |
| **React** | ğŸ”µ å‰ç«¯ | `.tsx` ç»„ä»¶æ–‡ä»¶ |
| **TypeScript** | ğŸ”µğŸ”´ å‰ç«¯+åç«¯ | `.ts`, `.tsx` æ–‡ä»¶ |
| **Tailwind CSS** | ğŸ”µ å‰ç«¯ | `globals.css`, ç»„ä»¶ä¸­çš„ className |
| **Prisma** | ğŸŸ¢ æ•°æ®åº“ | `prisma/` ç›®å½• |
| **SQLite** | ğŸŸ¢ æ•°æ®åº“ | `dev.db` æ–‡ä»¶ |
| **NextAuth.js** | ğŸ”´ åç«¯ | `lib/auth.ts`, `app/api/auth/` |

---

## ğŸ¯ å¸¸è§é—®é¢˜

### Q: Next.js çš„å‰åç«¯æ˜¯å¦‚ä½•åŒºåˆ†çš„ï¼Ÿ

**A:** Next.js æ˜¯å…¨æ ˆæ¡†æ¶ï¼š
- **å‰ç«¯**ï¼š`app/` ä¸‹çš„ `page.tsx`, `layout.tsx` ç­‰é¡µé¢ç»„ä»¶
- **åç«¯**ï¼š`app/api/` ä¸‹çš„ `route.ts` æ–‡ä»¶

### Q: ä¸ºä»€ä¹ˆå‰ç«¯æ–‡ä»¶ä¹Ÿèƒ½è®¿é—®æ•°æ®åº“ï¼Ÿ

**A:** è¿™æ˜¯ Next.js çš„ Server Components ç‰¹æ€§ï¼š
- `app/properties/page.tsx` åœ¨**æœåŠ¡å™¨ç«¯**æ¸²æŸ“
- å¯ä»¥ç›´æ¥è°ƒç”¨ Prismaï¼Œä¸éœ€è¦é€šè¿‡ API
- æ¸²æŸ“å®Œæˆåï¼ŒHTML å‘é€åˆ°æµè§ˆå™¨

### Q: å“ªäº›ä»£ç è¿è¡Œåœ¨æµè§ˆå™¨ï¼Œå“ªäº›åœ¨æœåŠ¡å™¨ï¼Ÿ

**A:**
- **æµè§ˆå™¨**ï¼šæ ‡è®° `"use client"` çš„ç»„ä»¶ï¼ˆå¦‚ `Navbar.tsx`, `new/page.tsx`ï¼‰
- **æœåŠ¡å™¨**ï¼šæ²¡æœ‰ `"use client"` çš„ç»„ä»¶ã€æ‰€æœ‰ `route.ts` æ–‡ä»¶

### Q: æ•°æ®åº“æ–‡ä»¶å¯ä»¥åˆ é™¤å—ï¼Ÿ

**A:**
- `dev.db` - å¯ä»¥åˆ é™¤ï¼Œé‡æ–°è¿è¡Œ `npx prisma migrate dev` ä¼šé‡å»º
- `schema.prisma` - **ä¸èƒ½åˆ é™¤**ï¼Œè¿™æ˜¯æ•°æ®æ¨¡å‹å®šä¹‰
- `migrations/` - **ä¸å»ºè®®åˆ é™¤**ï¼ŒåŒ…å«æ•°æ®åº“ç‰ˆæœ¬å†å²

---

## ğŸ“ æ€»ç»“

- **ğŸ”µ å‰ç«¯æ–‡ä»¶**ï¼šç”¨æˆ·ç•Œé¢ã€ç»„ä»¶ã€æ ·å¼ï¼ˆ33 ä¸ªæ–‡ä»¶ï¼‰
- **ğŸ”´ åç«¯æ–‡ä»¶**ï¼šAPI è·¯ç”±ã€ä¸šåŠ¡é€»è¾‘ã€é…ç½®ï¼ˆ5 ä¸ªæ–‡ä»¶ï¼‰
- **ğŸŸ¢ æ•°æ®åº“æ–‡ä»¶**ï¼šæ•°æ®æ¨¡å‹ã€è¿ç§»ã€æ•°æ®åº“ï¼ˆ5 ä¸ªæ–‡ä»¶ï¼‰
- **âš™ï¸ é…ç½®æ–‡ä»¶**ï¼šå·¥å…·é…ç½®ã€ä¾èµ–ç®¡ç†ï¼ˆ9 ä¸ªæ–‡ä»¶ï¼‰

é¡¹ç›®é‡‡ç”¨ **Monorepo** æ¶æ„ï¼Œå‰åç«¯ä»£ç åœ¨åŒä¸€ä¸ªä»“åº“ä¸­ï¼Œé€šè¿‡ Next.js ç»Ÿä¸€ç®¡ç†ã€‚
